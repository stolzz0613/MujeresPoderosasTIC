(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{823:function(e,n,t){"use strict";t.r(n);var i=t(4942),a=t(7294),o=t(1163),r=t(179),c=t.n(r),u=t(6455),l=t.n(u),s=t(9669),d=t.n(s),p=t(5893);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.default=function(){var e=(0,o.useRouter)().query,n=(0,a.useState)(""),t=n[0],i=n[1],r=(0,a.useState)([]),u=r[0],s=r[1],f=(0,a.useState)(""),h=f[0],m=f[1],g=(0,a.useState)({titulo:"",linkNoticia:"",linkImagen:"",categoria:"",estado:""}),v=g[0],j=g[1];(0,a.useEffect)((function(){(null===e||void 0===e?void 0:e.type)&&i("create"===e.type?"Crear publicaci\xf3n":"Editar o eliminar publicaci\xf3n")}),[e]),(0,a.useEffect)((function(){x()}),[]),(0,a.useEffect)((function(){var e=u.filter((function(e){return e._id===h}))[0];e&&j({titulo:e.titulo,linkNoticia:e.linkNoticia,linkImagen:e.linkImagen,categoria:e.categoria,estado:e.estado})}),[h]);var x=function(){d().get("https://nameless-brushlands-25377.herokuapp.com/api/publicaciones").then((function(e){console.log(e.data),s(e.data)}))};return(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:t}),(0,p.jsxs)("div",{className:c().form,children:[(0,p.jsx)("label",{children:"Titulo"}),(0,p.jsx)("input",{value:v.titulo,onChange:function(e){return j(b(b({},v),{},{titulo:e.target.value}))}}),(0,p.jsx)("label",{children:"Categoria"}),(0,p.jsxs)("select",{value:v.categoria,onChange:function(e){return j(b(b({},v),{},{categoria:e.target.value}))},children:[(0,p.jsx)("option",{selected:!0,children:"Selecciona una categoria"}),(0,p.jsx)("option",{value:"noticia",children:"Noticias del sector"}),(0,p.jsx)("option",{value:"web",children:"Web recomendadas"}),(0,p.jsx)("option",{value:"cyb",children:"Convocatorias y becas"})]}),"edit"===(null===e||void 0===e?void 0:e.type)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("label",{children:"Publicaci\xf3n"}),(0,p.jsxs)("select",{value:h,onChange:function(e){return m(e.target.value)},children:[(0,p.jsx)("option",{selected:!0,children:"Selecciona una publicacion"}),u.map((function(e){return(0,p.jsx)("option",{value:e._id,children:e.titulo})}))]})]}),(0,p.jsx)("label",{children:"Link"}),(0,p.jsx)("input",{value:v.linkNoticia,onChange:function(e){return j(b(b({},v),{},{linkNoticia:e.target.value}))}}),(0,p.jsx)("label",{children:"Imagen"}),(0,p.jsx)("input",{value:v.linkImagen,onChange:function(e){return j(b(b({},v),{},{linkImagen:e.target.value}))}}),(0,p.jsx)("label",{children:"Estado"}),(0,p.jsxs)("select",{value:v.estado,onChange:function(e){return j(b(b({},v),{},{estado:e.target.value}))},children:[(0,p.jsx)("option",{selected:!0,children:"Selecciona un estado"}),(0,p.jsx)("option",{value:"guardada",children:"Guardada"}),(0,p.jsx)("option",{value:"publicada",children:"Publicada"})]})]}),(0,p.jsx)("div",{className:c().button,children:"edit"===(null===e||void 0===e?void 0:e.type)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:c().button_submit,onClick:function(){""===v.titulo||""===v.linkNoticia||""===v.linkImagen||""===v.categoria||""===v.estado||""===h?l().fire("Error","Te falta completar uno o varios campos","error"):d().put("https://nameless-brushlands-25377.herokuapp.com/api/publicaciones/"+h,v).then((function(){x()})).then((function(){l().fire("Well!","La publicacion fue Editada","success")})).catch((function(){l().fire("Upss!","Hubo un error, intenta de nuevo","error")}))},children:"Editar"}),(0,p.jsx)("button",{className:c().button_submit,onClick:function(){0===h.length?l().fire("Upss!","Debes seleccionar una publicacion para eliminar","error"):d().delete("https://nameless-brushlands-25377.herokuapp.com/api/publicaciones/"+h).then((function(){x(),j({titulo:"",linkNoticia:"",linkImagen:"",categoria:"",estado:""}),m("")})).then((function(){l().fire("Well!","La publicacion fue eliminada","success")})).catch((function(){l().fire("Upss!","Hubo un error, intenta de nuevo","error")}))},children:"Eliminar"})]}):(0,p.jsx)("button",{className:c().button_submit,onClick:function(){""===v.titulo||""===v.linkNoticia||""===v.linkImagen||""===v.categoria||""===v.estado?l().fire("Error","Te falta completar uno o varios campos","error"):d().post("https://nameless-brushlands-25377.herokuapp.com/api/publicaciones",v).then((function(e){l().fire("Well!","La publicacion fue creada","success")})).catch((function(e){l().fire("Upss!","Hubo un error, intenta de nuevo","error")}))},children:"Publicar"})})]})}},2393:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/publish",function(){return t(823)}])},179:function(e){e.exports={form:"publish_form_form__XXIwc",button:"publish_form_button__aY564",button_submit:"publish_form_button_submit__2uplG"}}},function(e){e.O(0,[774,888,179],(function(){return n=2393,e(e.s=n);var n}));var n=e.O();_N_E=n}]);